---
title: "消息队列触发器"
weight: 4
description: >
  订阅主题并调用函数
---

# 简介

一个消息队列触发器绑定一个消息队列主题到函数：
来自此主题的事件触发函数以消息作为请求 body 调用。触发器同时包含一个响应主题：
如果指定了响应主题，函数的输出会被发送到此主题。

# 图解

{{< img "../assets/mqtrigger.png" "Fig.1 消息队列触发器" "45em" "1" >}}

1. 消息队列触发器首先订阅用户定义的主题。
2. Publisher（发布器），它可以使一个 Fission 函数或外部应用，发布消息到订阅的主题中。
3. 触发器从队列中收到消息。
4. 调用函数并获取响应结果。
5. (A) 如果是 200 OK，则触发器发布结果到响应主题（如果配置了的话）。
6. (B) 如果发生错误或响应状态不是 200 OK，那么触发器发布结果到错误主题（如果配置了的话）。</br>
当前，仅 NATS 和 Kafka 消息队列触发器支持错误主题。
